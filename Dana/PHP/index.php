<?php$tasks = simplexml_load_file("tasks.xml") -> task;$dateSort = "";$deadSort = "";if (isset($_GET["date"])) {    $dateSort = $_GET["date"];}else if (isset($_GET["dead"])) {    $deadSort = $_GET["dead"];}//Поиск по заказчикуfunction searchItemByCreator($query){    global $tasks;    $result = array();    foreach ($tasks as $task){        if(substr(strtolower($task -> creator), 0, strlen($query)) == strtolower($query))            array_push($result, $task);    }    return $result;}//Сортировка по количествуfunction sortDate($a, $b){    global $dateSort;	$t1 = strtotime($a -> date);	$t2 = strtotime($b -> date);	    if ($dateSort == "ASC")        return $t1 - $t2;    else        return $t2 - $t1;}//Сортировка по ценеfunction sortDead($a, $b){    global $deadSort;	$t1 = strtotime($a -> deadline);	$t2 = strtotime($b -> deadline);	    if ($deadSort == "ASC")        return $t1 - $t2;    else        return $t2 - $t1;}//Функция перевода объекта XML в массив, нужна для сортировкеfunction xmlToArray() {    global $tasks;    $result = array();    foreach($tasks as $node) {        $result[] = $node;    }    return $result;}?><!DOCTYPE html><html><head>    <title>Считывание XML для PHP</title>    <meta charset="utf-8" /></head><body>    <div>        <h1>XML Tasks</h1>        <b>First task creator name:</b>        <b>            <?php                echo $tasks[0] -> creator;            ?>        </b>        <br>        <b>Last task creator name:</b>        <b>            <?php            $var_Ps=$tasks->xpath('/tasks/task[last()]/creator')[0];            echo $var_Ps;            ?>        </b>        <br /><br />        <h4>Table</h4>        <table border="1">            <tr>                <th>Id</th>                <?php                    //Создаем ссылки в зависимости от текущей сортировки                    if ($dateSort == "DESC") {                        echo '<th><a href="?date=ASC">Date</a></th>';                    }                    else {                        echo '<th><a href="?date=DESC">Date</a></th>';                    }                    if ($deadSort == "DESC") {                        echo '<th><a href="?dead=ASC">Deadline</a></th>';                    }                    else {                        echo '<th><a href="?dead=DESC">Deadline</a></th>';                    }                ?>                <th>Subject</th>                <th>Info</th>				<th>Creator</th>            </tr>            <?php            //Переводим ксамл объект в массив            $result = xmlToArray();            //Сортируем если указана одна из двух сортировок            if ($dateSort != "") {                usort($result, "sortDate");            }            else if ($deadSort != "") {                usort($result, "sortDead");            }            foreach($result as $task) {                echo '<tr>';                    echo '<td>'.($task -> id).'</td>';                    echo '<td>'.($task -> date).'</td>';                    echo '<td>'.($task -> deadline).'€</td>';                    echo '<td>'.($task -> subject).'</td>';                    echo '<td>'.($task -> info).'</td>';					echo '<td>'.($task -> creator).'</td>';                echo '</tr>';            }            ?>        </table>        <div>            <h4>Search by customer name</h4>            <div>                <form action="?" method="post">                    <h3>                        <div>                            <input type="text" name="searchName" />                            <input type="submit" value="Find" />                        </div>                    </h3>                </form>                <table border="1">                    <tr>                        <th>Id</th>                        <th>Date</th>						<th>Deadline</th>						<th>Subject</th>						<th>Info</th>						<th>Creator</th>                    </tr>                    <?php                        if(!empty($_POST['searchName'])) {                            $result = searchItemByCreator($_POST['searchName']);                            foreach($result as $task) {								echo '<tr>';									echo '<td>'.($task -> id).'</td>';									echo '<td>'.($task -> date).'</td>';									echo '<td>'.($task -> deadline).'€</td>';									echo '<td>'.($task -> subject).'</td>';									echo '<td>'.($task -> info).'</td>';									echo '<td>'.($task -> creator).'</td>';								echo '</tr>';                            }                        }                    ?>                </table>            </div>        </div>    </div></body></html>